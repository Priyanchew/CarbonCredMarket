<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carbon Credit API Documentation</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .code-block {
            background: #1f2937;
            color: #f3f4f6;
            border-radius: 8px;
            padding: 1rem;
            overflow-x: auto;
        }
        .endpoint-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
        }
        .post-badge { background: #dbeafe; color: #1e40af; }
        .get-badge { background: #dcfce7; color: #166534; }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="bg-white shadow">
        <div class="max-w-7xl mx-auto py-6 px-4">
            <div class="flex items-center justify-between">
                <div>
                    <h1 class="text-3xl font-bold text-gray-900">Carbon Credit API</h1>
                    <p class="text-gray-600 mt-2">Integrate carbon offsetting into your applications</p>
                </div>
                <div class="flex gap-3">
                    <a href="/dashboard" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors">
                        Dashboard
                    </a>
                    <a href="/api-example/flight" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                        Try Demo
                    </a>
                </div>
            </div>
        </div>
    </header>

    <div class="max-w-7xl mx-auto py-8 px-4">
        <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
            <!-- Sidebar Navigation -->
            <nav class="lg:col-span-1">
                <div class="sticky top-8">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">Documentation</h3>
                    <ul class="space-y-2">
                        <li><a href="#getting-started" class="text-blue-600 hover:text-blue-800">Getting Started</a></li>
                        <li><a href="#authentication" class="text-blue-600 hover:text-blue-800">Authentication</a></li>
                        <li><a href="#endpoints" class="text-blue-600 hover:text-blue-800">API Endpoints</a></li>
                        <li><a href="#emissions-estimation" class="text-blue-600 hover:text-blue-800">Emissions Estimation</a></li>
                        <li><a href="#carbon-offsetting" class="text-blue-600 hover:text-blue-800">Carbon Offsetting</a></li>
                        <li><a href="#examples" class="text-blue-600 hover:text-blue-800">Code Examples</a></li>
                        <li><a href="#error-handling" class="text-blue-600 hover:text-blue-800">Error Handling</a></li>
                        <li><a href="#rate-limits" class="text-blue-600 hover:text-blue-800">Rate Limits</a></li>
                    </ul>
                </div>
            </nav>

            <!-- Main Content -->
            <main class="lg:col-span-3">
                <!-- Getting Started -->
                <section id="getting-started" class="mb-12">
                    <h2 class="text-2xl font-bold text-gray-900 mb-4">Getting Started</h2>
                    <div class="bg-white rounded-lg shadow p-6">
                        <p class="text-gray-700 mb-4">
                            The Carbon Credit API allows you to integrate carbon emission calculations and offsetting 
                            directly into your applications. Calculate emissions from various activities and purchase 
                            verified carbon offsets programmatically.
                        </p>
                        
                        <h3 class="text-lg font-semibold text-gray-900 mb-3">Base URL</h3>
                        <div class="code-block mb-4">
                            <code>https://your-domain.com/external-api</code>
                        </div>

                        <h3 class="text-lg font-semibold text-gray-900 mb-3">Supported Categories</h3>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-2 mb-4">
                            <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm">Flight</span>
                            <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm">Shipping</span>
                            <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm">Transportation</span>
                            <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm">Energy</span>
                            <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm">Electricity</span>
                            <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm">Manufacturing</span>
                            <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm">Agriculture</span>
                            <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm">Waste</span>
                        </div>
                    </div>
                </section>

                <!-- Authentication -->
                <section id="authentication" class="mb-12">
                    <h2 class="text-2xl font-bold text-gray-900 mb-4">Authentication</h2>
                    <div class="bg-white rounded-lg shadow p-6">
                        <p class="text-gray-700 mb-4">
                            All API requests require authentication using an API key. Include your API key 
                            in the <code class="bg-gray-100 px-2 py-1 rounded">X-API-Key</code> header.
                        </p>
                        
                        <h3 class="text-lg font-semibold text-gray-900 mb-3">Getting Your API Key</h3>
                        <ol class="list-decimal list-inside text-gray-700 mb-4">
                            <li>Sign up for an account on our platform</li>
                            <li>Navigate to the API Access tab in your dashboard</li>
                            <li>Generate your API key</li>
                        </ol>

                        <h3 class="text-lg font-semibold text-gray-900 mb-3">Request Headers</h3>
                        <div class="code-block">
                            <code>X-API-Key: your-api-key-here
Content-Type: application/json</code>
                        </div>
                    </div>
                </section>

                <!-- API Endpoints -->
                <section id="endpoints" class="mb-12">
                    <h2 class="text-2xl font-bold text-gray-900 mb-4">API Endpoints</h2>
                    
                    <!-- Emissions Estimation -->
                    <div id="emissions-estimation" class="bg-white rounded-lg shadow p-6 mb-6">
                        <div class="flex items-center gap-3 mb-4">
                            <span class="endpoint-badge post-badge">POST</span>
                            <code class="text-lg font-mono">/external-api/emissions</code>
                        </div>
                        
                        <p class="text-gray-700 mb-4">
                            Calculate carbon emissions for various activities including flights, shipping, energy consumption, and more.
                        </p>

                        <h4 class="font-semibold text-gray-900 mb-2">Request Body</h4>
                        <div class="code-block mb-4">
                            <code>{
  "category": "flight",
  "activity_data": {
    "origin": "DEL",
    "destination": "LHR", 
    "passenger_count": 2,
    "flight_class": "economy"
  },
  "external_reference_id": "flight_booking_123"
}</code>
                        </div>

                        <h4 class="font-semibold text-gray-900 mb-2">Response</h4>
                        <div class="code-block mb-4">
                            <code>{
  "estimated_emissions_kg": 1250.5,
  "estimated_offset_cost_usd": 18.75,
  "external_reference_id": "flight_booking_123"
}</code>
                        </div>

                        <h4 class="font-semibold text-gray-900 mb-2">Activity Data by Category</h4>
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Category</th>
                                        <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Required Fields</th>
                                        <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Optional Fields</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200">
                                    <tr>
                                        <td class="px-4 py-2 text-sm text-gray-900">flight</td>
                                        <td class="px-4 py-2 text-sm text-gray-600">origin, destination, passenger_count</td>
                                        <td class="px-4 py-2 text-sm text-gray-600">flight_class</td>
                                    </tr>
                                    <tr>
                                        <td class="px-4 py-2 text-sm text-gray-900">shipping</td>
                                        <td class="px-4 py-2 text-sm text-gray-600">weight_kg, distance_km</td>
                                        <td class="px-4 py-2 text-sm text-gray-600">transport_method</td>
                                    </tr>
                                    <tr>
                                        <td class="px-4 py-2 text-sm text-gray-900">electricity</td>
                                        <td class="px-4 py-2 text-sm text-gray-600">amount, unit</td>
                                        <td class="px-4 py-2 text-sm text-gray-600">-</td>
                                    </tr>
                                    <tr>
                                        <td class="px-4 py-2 text-sm text-gray-900">transportation</td>
                                        <td class="px-4 py-2 text-sm text-gray-600">amount, unit</td>
                                        <td class="px-4 py-2 text-sm text-gray-600">vehicle_type</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Carbon Offsetting -->
                    <div id="carbon-offsetting" class="bg-white rounded-lg shadow p-6">
                        <div class="flex items-center gap-3 mb-4">
                            <span class="endpoint-badge post-badge">POST</span>
                            <code class="text-lg font-mono">/external-api/offset</code>
                        </div>
                        
                        <p class="text-gray-700 mb-4">
                            Purchase carbon offsets and receive a certificate via email.
                        </p>

                        <h4 class="font-semibold text-gray-900 mb-2">Request Body</h4>
                        <div class="code-block mb-4">
                            <code>{
  "external_reference_id": "order_1241",
  "emissions_kg": 1250.5,
  "user_email": "user@example.com"
}</code>
                        </div>

                        <h4 class="font-semibold text-gray-900 mb-2">Response</h4>
                        <div class="code-block">
                            <code>{
  "status": "success",
  "certificate_id": "cert_abc123",
  "report_sent_to": "user@example.com",
  "external_reference_id": "order_1241"
}</code>
                        </div>
                    </div>
                </section>

                <!-- Code Examples -->
                <section id="examples" class="mb-12">
                    <h2 class="text-2xl font-bold text-gray-900 mb-4">Code Examples</h2>
                    
                    <!-- JavaScript Example -->
                    <div class="bg-white rounded-lg shadow p-6 mb-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-3">JavaScript / Node.js</h3>
                        <div class="code-block">
                            <code>// Estimate flight emissions
const estimateResponse = await fetch('/external-api/emissions', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'X-API-Key': 'your-api-key-here'
  },
  body: JSON.stringify({
    category: 'flight',
    activity_data: {
      origin: 'DEL',
      destination: 'LHR',
      passenger_count: 2,
      flight_class: 'economy'
    },
    external_reference_id: 'flight_001'
  })
});

const estimateData = await estimateResponse.json();
console.log('Emissions:', estimateData.estimated_emissions_kg, 'kg CO2');

// Purchase carbon offset
const offsetResponse = await fetch('/external-api/offset', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'X-API-Key': 'your-api-key-here'
  },
  body: JSON.stringify({
    external_reference_id: 'flight_001',
    emissions_kg: estimateData.estimated_emissions_kg,
    user_email: 'customer@example.com'
  })
});

const offsetData = await offsetResponse.json();
console.log('Certificate ID:', offsetData.certificate_id);</code>
                        </div>
                    </div>

                    <!-- Python Example -->
                    <div class="bg-white rounded-lg shadow p-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-3">Python</h3>
                        <div class="code-block">
                            <code>import requests

# Your API key
API_KEY = 'your-api-key-here'
BASE_URL = 'https://your-domain.com/external-api'

headers = {
    'Content-Type': 'application/json',
    'X-API-Key': API_KEY
}

# Estimate shipping emissions
estimate_data = {
    'category': 'shipping',
    'activity_data': {
        'weight_kg': 100,
        'distance_km': 500,
        'transport_method': 'truck'
    },
    'external_reference_id': 'shipment_456'
}

response = requests.post(f'{BASE_URL}/emissions', 
                        json=estimate_data, 
                        headers=headers)
estimate_result = response.json()

print(f"Emissions: {estimate_result['estimated_emissions_kg']} kg CO2")

# Purchase offset
offset_data = {
    'external_reference_id': 'shipment_456',
    'emissions_kg': estimate_result['estimated_emissions_kg'],
    'user_email': 'customer@example.com'
}

offset_response = requests.post(f'{BASE_URL}/offset', 
                               json=offset_data, 
                               headers=headers)
offset_result = offset_response.json()

print(f"Certificate: {offset_result['certificate_id']}")</code>
                        </div>
                    </div>
                </section>

                <!-- Error Handling -->
                <section id="error-handling" class="mb-12">
                    <h2 class="text-2xl font-bold text-gray-900 mb-4">Error Handling</h2>
                    <div class="bg-white rounded-lg shadow p-6">
                        <p class="text-gray-700 mb-4">
                            The API uses conventional HTTP response codes to indicate success or failure.
                        </p>
                        
                        <div class="overflow-x-auto mb-4">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Code</th>
                                        <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Description</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200">
                                    <tr>
                                        <td class="px-4 py-2 text-sm font-mono">200</td>
                                        <td class="px-4 py-2 text-sm text-gray-900">Success</td>
                                    </tr>
                                    <tr>
                                        <td class="px-4 py-2 text-sm font-mono">400</td>
                                        <td class="px-4 py-2 text-sm text-gray-900">Bad Request - Invalid input data</td>
                                    </tr>
                                    <tr>
                                        <td class="px-4 py-2 text-sm font-mono">401</td>
                                        <td class="px-4 py-2 text-sm text-gray-900">Unauthorized - Invalid or missing API key</td>
                                    </tr>
                                    <tr>
                                        <td class="px-4 py-2 text-sm font-mono">500</td>
                                        <td class="px-4 py-2 text-sm text-gray-900">Internal Server Error</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <h3 class="text-lg font-semibold text-gray-900 mb-3">Error Response Format</h3>
                        <div class="code-block">
                            <code>{
  "detail": "Invalid or missing API key",
  "error_code": "UNAUTHORIZED"
}</code>
                        </div>
                    </div>
                </section>

                <!-- Rate Limits -->
                <section id="rate-limits" class="mb-12">
                    <h2 class="text-2xl font-bold text-gray-900 mb-4">Rate Limits</h2>
                    <div class="bg-white rounded-lg shadow p-6">
                        <p class="text-gray-700 mb-4">
                            API requests are rate limited to ensure fair usage and system stability.
                        </p>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="text-center p-4 bg-blue-50 rounded-lg">
                                <div class="text-2xl font-bold text-blue-600">60</div>
                                <div class="text-sm text-gray-600">Requests per minute</div>
                            </div>
                            <div class="text-center p-4 bg-green-50 rounded-lg">
                                <div class="text-2xl font-bold text-green-600">1,000</div>
                                <div class="text-sm text-gray-600">Requests per hour</div>
                            </div>
                        </div>
                        
                        <p class="text-gray-600 mt-4 text-sm">
                            Rate limit headers are included in all responses. Contact support if you need higher limits.
                        </p>
                    </div>
                </section>
            </main>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-white border-t mt-16">
        <div class="max-w-7xl mx-auto py-6 px-4">
            <div class="text-center text-gray-600">
                <p>&copy; 2025 Carbon Credit Marketplace. All rights reserved.</p>
                <p class="mt-2">Need help? <a href="mailto:support@example.com" class="text-blue-600 hover:text-blue-800">Contact Support</a></p>
            </div>
        </div>
    </footer>
</body>
</html>
